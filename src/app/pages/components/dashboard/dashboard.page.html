<!-- header starts -->
<app-header></app-header>
<!-- header end -->
<ion-content fullscreen="true">
  <ng-container *ngIf="!hasError; else errorTpl">
    <!-- earning section starts -->
    <section>
      <div class="custom-container">
        <ul class="total-ride-list mt-0 p-0">
          <li>
            <a href="wallet.html" class="ride-box">
              <div class="flex-spacing gap-1">
                <h4>$3100</h4>
                <div class="ride-icon">
                  <i class="iconsax icon" data-icon="wallet-open"> </i>
                </div>
              </div>
              <div class="flex-spacing gap-1 mt-1">
                <h6 class="d-flex flex-wrap">Total Earnings</h6>
                <i class="iconsax arrow-icon" data-icon="arrow-right"> </i>
              </div>
            </a>
          </li>
          <li>
            <a href="my-rides.html" class="ride-box">
              <div class="flex-spacing gap-1">
                <h4>16</h4>
                <div class="ride-icon">
                  <i class="iconsax icon" data-icon="smart-car"> </i>
                </div>
              </div>
              <div class="flex-spacing gap-1 mt-1">
                <h6 class="d-flex flex-wrap">Complete Ride</h6>
                <i class="iconsax arrow-icon" data-icon="arrow-right"> </i>
              </div>
            </a>
          </li>

          <li>
            <a href="my-rides.html" class="ride-box">
              <div class="flex-spacing gap-1">
                <h4>02</h4>
                <div class="ride-icon">
                  <i class="iconsax icon" data-icon="car"> </i>
                </div>
              </div>
              <div class="flex-spacing gap-1 mt-1">
                <h6 class="d-flex flex-wrap">Pending Ride</h6>
                <i class="iconsax arrow-icon" data-icon="arrow-right"> </i>
              </div>
            </a>
          </li>
          <li>
            <a href="my-rides.html" class="ride-box">
              <div class="flex-spacing gap-1">
                <h4>04</h4>
                <div class="ride-icon">
                  <i class="iconsax icon" data-icon="driving"> </i>
                </div>
              </div>
              <div class="flex-spacing gap-1 mt-1">
                <h6 class="d-flex flex-wrap">Cancel Ride</h6>
                <i class="iconsax arrow-icon" data-icon="arrow-right"> </i>
              </div>
            </a>
          </li>
        </ul>
      </div>
    </section>
    <!-- earning section end -->

    <!-- upcoming ride section starts -->
    <section class="upcoming-ride-section" style="margin-bottom: 100px">
      <div class="custom-container">
        <div class="title">
          <h4>New Upcoming Ride</h4>
        </div>
        <ul class="my-ride-list driver-ride-list mt-0">
          <li *ngFor="let ride of upcomingRides">
            <div class="my-ride-box">
              <!-- HEADER -->
              <div class="my-ride-head">
                <a class="my-ride-img">
                  <img
                    class="img-fluid profile-img"
                    src="../../assets/images/profile/p5.png"
                    alt="user"
                  />
                </a>

                <div class="my-ride-content flex-column">
                  <div class="flex-spacing">
                    <!-- USERNAME -->
                    <h5 class="title-color fw-medium">
                      {{ ride.userId?.username }}
                    </h5>
                    <div class="flex-align-center">
                      <div class="flex-align-center gap-1 pe-2">
                        <h5 class="fw-normal title-color p-0">
                          {{ride.tripType}}
                        </h5>
                      </div>

                      <div class="flex-align-center">
                        <h5 class="fw-mediun theme-color price ps-2 pe-0">
                          ₹ {{ ride.totalAmount }}
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- DETAILS -->
              <div class="my-ride-details">
                <div class="ride-info">
                  <div class="flex-align-center gap-1">
                    <img
                      class="icon img-fluid"
                      src="../../assets/images/svg/location-fill.svg"
                      alt="location"
                    />
                    <h6 class="fw-normal title-color">{{ ride.totalKm }} km</h6>
                  </div>

                  <h6 class="fw-normal title-color">
                    {{ ride.pickUpDate | date:'dd MMM yyyy' }} at {{
                    ride.pickUpTime | date:'hh:mm a' }}
                  </h6>
                </div>

                <!-- LOCATIONS -->
                <ul class="ride-location-listing">
                  <!-- FROM -->
                  <li class="border-0 shadow-none box-background">
                    <div class="location-box bg-transparent">
                      <img
                        class="icon"
                        src="../../assets/images/svg/location-fill.svg"
                        alt="location"
                      />
                      <h5 class="fw-light title-color">
                        {{ ride.locations[0] }}
                      </h5>
                    </div>
                  </li>

                  <!-- TO -->
                  <li class="border-0 shadow-none box-background">
                    <div class="location-box bg-transparent">
                      <img
                        class="icon"
                        src="../../assets/images/svg/gps.svg"
                        alt="gps"
                      />
                      <h5 class="fw-light title-color border-0">
                        {{ ride.locations[1] }}
                      </h5>
                    </div>
                  </li>
                </ul>
                <button
                  type="submit"
                  class="btn theme-btn w-100 auth-btn mt-2"
                  (click)="acceptRide(ride)"
                >
                  Accept Ride
                </button>
              </div>
            </div>
          </li>
        </ul>

        <!-- <ul class="my-ride-list driver-ride-list mt-0">
          <li>
            <div class="my-ride-box">
              <div class="my-ride-head">
                <a href="accept-ride.html" class="my-ride-img">
                  <img
                    class="img-fluid profile-img"
                    src="../../assets/images/profile/p5.png"
                    alt="p5"
                  />
                </a>

                <div class="my-ride-content flex-column">
                  <div class="flex-spacing">
                    <a href="accept-ride.html">
                      <h5 class="title-color fw-medium">Peter Thornton</h5>
                    </a>
                    <div class="flex-align-center">
                      <div class="flex-align-center gap-1 pe-2">
                        <img
                          class="star"
                          src="../../assets/images/svg/star.svg"
                          alt="star"
                        />
                        <h5 class="fw-normal title-color p-0">4.8</h5>
                      </div>
                      <h5 class="fw-mediun theme-color price ps-2 pe-0">
                        $256
                      </h5>
                    </div>
                  </div>
                </div>
              </div>

              <div class="my-ride-details">
                <div class="ride-info">
                  <div class="flex-align-center gap-1">
                    <img
                      class="icon img-fluid"
                      src="../../assets/images/svg/location-fill.svg"
                      alt="location"
                    />
                    <h6 class="fw-normal title-color">10 km</h6>
                  </div>
                  <h6 class="fw-normal title-color">10 May’25 at 4:10 AM</h6>
                </div>
                <ul class="ride-location-listing">
                  <li class="border-0 shadow-none box-background">
                    <div class="location-box bg-transparent">
                      <img
                        class="icon"
                        src="../../assets/images/svg/location-fill.svg"
                        alt="location"
                      />
                      <h5 class="fw-light title-color">
                        17, Yonge St, Toronto, Canada
                      </h5>
                    </div>
                  </li>

                  <li class="border-0 shadow-none box-background">
                    <div class="location-box bg-transparent">
                      <img
                        class="icon"
                        src="../../assets/images/svg/gps.svg"
                        alt="gps"
                      />
                      <h5 class="fw-light title-color border-0">
                        20, Avenue St, Toronto, Canada
                      </h5>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </li>

          <li>
            <div class="my-ride-box">
              <div class="my-ride-head">
                <a href="accept-ride.html" class="my-ride-img">
                  <img
                    class="img-fluid profile-img"
                    src="../../assets/images/profile/p6.png"
                    alt="p5"
                  />
                </a>

                <div class="my-ride-content flex-column">
                  <div class="flex-spacing">
                    <a href="accept-ride.html">
                      <h5 class="title-color fw-medium">Tony Danza</h5>
                    </a>
                    <div class="flex-align-center">
                      <div class="flex-align-center gap-1 pe-2">
                        <img
                          class="star"
                          src="../../assets/images/svg/star.svg"
                          alt="star"
                        />
                        <h5 class="fw-normal title-color p-0">4.4</h5>
                      </div>
                      <h5 class="fw-mediun theme-color price ps-2 pe-0">
                        $158
                      </h5>
                    </div>
                  </div>
                </div>
              </div>

              <div class="my-ride-details">
                <div class="ride-info">
                  <div class="flex-align-center gap-1">
                    <img
                      class="icon img-fluid"
                      src="../../assets/images/svg/location-fill.svg"
                      alt="location"
                    />
                    <h6 class="fw-normal title-color">8 km</h6>
                  </div>
                  <h6 class="fw-normal title-color">15 May’25 at 10:15 AM</h6>
                </div>
                <ul class="ride-location-listing">
                  <li class="border-0 shadow-none box-background">
                    <div class="location-box bg-transparent">
                      <img
                        class="icon"
                        src="../../assets/images/svg/location-fill.svg"
                        alt="location"
                      />
                      <h5 class="fw-light title-color">
                        10, Avenue St, Toronto, Canada
                      </h5>
                    </div>
                  </li>

                  <li class="border-0 shadow-none box-background">
                    <div class="location-box bg-transparent">
                      <img
                        class="icon"
                        src="../../assets/images/svg/gps.svg"
                        alt="gps"
                      />
                      <h5 class="fw-light title-color border-0">
                        35, Critch Cir, Toronto, Canada
                      </h5>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </li>
        </ul> -->
      </div>
    </section>
    <!-- upcoming ride section end -->

    <!-- active offer section starts -->
    <!-- <section>
    <div class="custom-container">
      <div class="title">
        <h3>Today’s Offer</h3>
      </div>

      <ul class="offer-listing">
        <li class="w-100">
          <div class="offer-box">
            <div class="offer-head">
              <a href="accept-ride.html" class="profile-part">
                <img
                  class="img-fluid profile-pic"
                  src="../../assets/images/profile/p5.png"
                  alt="p5"
                />
                <h6 class="fw-medium">Johnson Smith</h6>
              </a>
            </div>

            <div class="offer-content">
              <h6 class="fw-normal title-color">
                Up to 10 km from Wankover city area
                <span class="fw-semibold"> (30% OFF) </span>
              </h6>
              <div class="flex-spacing flex-wrap gap-2 mt-sm-3 mt-2">
                <div class="flex-align-center">
                  <ul class="ride-info-list">
                    <li class="info-content">
                      <i class="iconsax icon" data-icon="car"> </i>
                      <span>sedan</span>
                    </li>
                    <li class="info-content">
                      <i class="iconsax icon" data-icon="user-1"> </i>
                      <span>4 person</span>
                    </li>
                  </ul>
                </div>
                <h6 class="validity">Valid : 20/4/2025</h6>
              </div>
            </div>

            <div class="active-part">
              <h6 class="fw-normal title-color">Active Status</h6>
              <div class="switch-btn">
                <input type="checkbox" checked />
              </div>
            </div>
          </div>
        </li>

        <li class="w-100">
          <div class="offer-box">
            <div class="offer-head">
              <a href="accept-ride.html" class="profile-part">
                <img
                  class="img-fluid profile-pic"
                  src="../../assets/images/profile/p6.png"
                  alt="p6"
                />
                <h6 class="fw-medium">Johnson Smith</h6>
              </a>
            </div>

            <div class="offer-content">
              <h6 class="fw-normal title-color">
                Up to 10 km from Wankover city area
                <span class="fw-semibold"> (20% OFF) </span>
              </h6>
              <div class="flex-spacing flex-wrap gap-2 mt-sm-3 mt-2">
                <div class="flex-align-center">
                  <ul class="ride-info-list">
                    <li class="info-content">
                      <i class="iconsax icon" data-icon="car"> </i>
                      <span>sedan</span>
                    </li>
                    <li class="info-content">
                      <i class="iconsax icon" data-icon="user-1"> </i>
                      <span>4 person</span>
                    </li>
                  </ul>
                </div>
                <h6 class="validity">Valid : 14/4/2025</h6>
              </div>
            </div>

            <div class="active-part">
              <h6 class="fw-normal title-color">Active Status</h6>
              <div class="switch-btn">
                <input type="checkbox" checked />
              </div>
            </div>
          </div>
        </li>

        <li class="w-100">
          <div class="offer-box">
            <div class="offer-head">
              <a href="accept-ride.html" class="profile-part">
                <img
                  class="img-fluid profile-pic"
                  src="../../assets/images/profile/p4.png"
                  alt="p4"
                />
                <h6 class="fw-medium">Johnson Smith</h6>
              </a>
            </div>

            <div class="offer-content">
              <h6 class="fw-normal title-color">
                Up to 10 km from Wankover city area
                <span class="fw-semibold"> (30% OFF) </span>
              </h6>
              <div class="flex-spacing flex-wrap gap-2 mt-sm-3 mt-2">
                <div class="flex-align-center">
                  <ul class="ride-info-list">
                    <li class="info-content">
                      <i class="iconsax icon" data-icon="car"> </i>
                      <span>sedan</span>
                    </li>
                    <li class="info-content">
                      <i class="iconsax icon" data-icon="user-1"> </i>
                      <span>4 person</span>
                    </li>
                  </ul>
                </div>
                <h6 class="validity">Valid : 20/4/2025</h6>
              </div>
            </div>

            <div class="active-part">
              <h6 class="fw-normal title-color">Active Status</h6>
              <div class="switch-btn">
                <input type="checkbox" checked />
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </section> -->
    <!-- active offer section end -->

    <!-- panel-space start -->
    <!-- panel-space end -->
  </ng-container>
</ion-content>
<!-- bottom navbar start -->
<app-tabs></app-tabs>
<!-- bottom navbar end -->

<!-- sidebar starts -->
<app-side-bar></app-side-bar>
<!-- sidebar end -->

<ng-template #errorTpl>
  <div
    class="custom-container d-flex flex-column justify-content-center align-items-center text-center"
    style="min-height: 70vh"
  >
    <img src="assets/images/svg/alert.svg" width="100" class="mb-3" />

    <h3 class="error-color">Oops. Data didn’t load.</h3>

    <p class="mb-3">{{ errorMessage }}</p>

    <div class="reason-part mt-3">
      <h4 class="fw-medium error-color"></h4>
      <p (click)="getAllLeads()" style="cursor: pointer">Try Again</p>
    </div>
  </div>
</ng-template>
